var q=/(%?)(%([sdijo]))/g;function M(e,t){switch(t){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":{if(typeof e=="string")return e;const r=JSON.stringify(e);return r==="{}"||r==="[]"||/^\[object .+?\]$/.test(r)?e:r}}}function _(e,...t){if(t.length===0)return e;let r=0,n=e.replace(q,(i,c,l,f)=>{const s=t[r],a=M(s,f);return c?i:(r++,a)});return r<t.length&&(n+=` ${t.slice(r).join(" ")}`),n=n.replace(/%{2,2}/g,"%"),n}var P=2;function A(e){if(!e.stack)return;const t=e.stack.split(`
`);t.splice(1,P),e.stack=t.join(`
`)}var j=class extends Error{constructor(e,...t){super(e),this.message=e,this.name="Invariant Violation",this.message=_(e,...t),A(this)}},I=(e,t,...r)=>{if(!e)throw new j(t,...r)};I.as=(e,t,r,...n)=>{if(!t){const i=n.length===0?r:_(r,...n);let c;try{c=Reflect.construct(e,[i])}catch{c=e(i)}throw c}};const U="[MSW]";function C(e,...t){const r=_(e,...t);return`${U} ${r}`}function F(e,...t){console.warn(C(e,...t))}function G(e,...t){console.error(C(e,...t))}const te={formatMessage:C,warn:F,error:G};class re extends Error{constructor(t){super(t),this.name="InternalError"}}var $=class extends Error{constructor(e,t,r){super(`Possible EventEmitter memory leak detected. ${r} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=e,this.type=t,this.count=r,this.name="MaxListenersExceededWarning"}},O=class{static listenerCount(e,t){return e.listenerCount(t)}constructor(){this.events=new Map,this.maxListeners=O.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(e,t,r){this.emit(e,t,r)}_getListeners(e){return Array.prototype.concat.apply([],this.events.get(e))||[]}_removeListener(e,t){const r=e.indexOf(t);return r>-1&&e.splice(r,1),[]}_wrapOnceListener(e,t){const r=(...n)=>(this.removeListener(e,r),t.apply(this,n));return Object.defineProperty(r,"name",{value:t.name}),r}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(e,...t){const r=this._getListeners(e);return r.forEach(n=>{n.apply(this,t)}),r.length>0}addListener(e,t){this._emitInternalEvent("newListener",e,t);const r=this._getListeners(e).concat(t);if(this.events.set(e,r),this.maxListeners>0&&this.listenerCount(e)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;const n=new $(this,e,this.listenerCount(e));console.warn(n)}return this}on(e,t){return this.addListener(e,t)}once(e,t){return this.addListener(e,this._wrapOnceListener(e,t))}prependListener(e,t){const r=this._getListeners(e);if(r.length>0){const n=[t].concat(r);this.events.set(e,n)}else this.events.set(e,r.concat(t));return this}prependOnceListener(e,t){return this.prependListener(e,this._wrapOnceListener(e,t))}removeListener(e,t){const r=this._getListeners(e);return r.length>0&&(this._removeListener(r,t),this.events.set(e,r),this._emitInternalEvent("removeListener",e,t)),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return e?this.events.delete(e):this.events.clear(),this}listeners(e){return Array.from(this._getListeners(e))}listenerCount(e){return this._getListeners(e).length}rawListeners(e){return this.listeners(e)}},W=O;W.defaultMaxListeners=10;const D=/[\/\\]msw[\/\\]src[\/\\](.+)/,T=/(node_modules)?[\/\\]lib[\/\\](core|browser|node|native|iife)[\/\\]|^[^\/\\]*$/;function V(e){const t=e.stack;if(!t)return;const n=t.split(`
`).slice(1).find(c=>!(D.test(c)||T.test(c)));return n?n.replace(/\s*at [^()]*\(([^)]+)\)/,"$1").replace(/^@/,""):void 0}function J(e){return e?typeof e[Symbol.iterator]=="function":!1}class L{static cache=new WeakMap;info;isUsed;resolver;resolverGenerator;resolverGeneratorResult;options;constructor(t){this.resolver=t.resolver,this.options=t.options;const r=V(new Error);this.info={...t.info,callFrame:r},this.isUsed=!1}async parse(t){return{}}async test(t){const r=await this.parse({request:t.request,resolutionContext:t.resolutionContext});return this.predicate({request:t.request,parsedResult:r,resolutionContext:t.resolutionContext})}extendResolverArgs(t){return{}}cloneRequestOrGetFromCache(t){const r=L.cache.get(t);if(typeof r<"u")return r;const n=t.clone();return L.cache.set(t,n),n}async run(t){if(this.isUsed&&this.options?.once)return null;const r=this.cloneRequestOrGetFromCache(t.request),n=await this.parse({request:t.request,resolutionContext:t.resolutionContext});if(!this.predicate({request:t.request,parsedResult:n,resolutionContext:t.resolutionContext})||this.isUsed&&this.options?.once)return null;this.isUsed=!0;const c=this.wrapResolver(this.resolver),l=this.extendResolverArgs({request:t.request,parsedResult:n}),s=await c({...l,requestId:t.requestId,request:t.request}).catch(o=>{if(o instanceof Response)return o;throw o});return this.createExecutionResult({request:r,requestId:t.requestId,response:s,parsedResult:n})}wrapResolver(t){return async r=>{const n=this.resolverGenerator||await t(r);if(J(n)){this.isUsed=!1;const{value:i,done:c}=n[Symbol.iterator]().next(),l=await i;return c&&(this.isUsed=!0),!l&&c?(I(this.resolverGeneratorResult,"Failed to returned a previously stored generator response: the value is not a valid Response."),this.resolverGeneratorResult.clone()):(this.resolverGenerator||(this.resolverGenerator=n),l&&(this.resolverGeneratorResult=l?.clone()),l)}return n}}createExecutionResult(t){return{handler:this,request:t.request,requestId:t.requestId,response:t.response,parsedResult:t.parsedResult}}}function se(e){if(typeof location>"u")return e.toString();const t=e instanceof URL?e:new URL(e);return t.origin===location.origin?t.pathname:t.origin+t.pathname}var K=Object.create,S=Object.defineProperty,z=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,Y=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,N=(e,t)=>function(){return t||(0,e[b(e)[0]])((t={exports:{}}).exports,t),t.exports},X=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of b(t))!B.call(e,i)&&i!==r&&S(e,i,{get:()=>t[i],enumerable:!(n=z(t,i))||n.enumerable});return e},Q=(e,t,r)=>(r=e!=null?K(Y(e)):{},X(!e||!e.__esModule?S(r,"default",{value:e,enumerable:!0}):r,e)),Z=N({"node_modules/set-cookie-parser/lib/set-cookie.js"(e,t){var r={decodeValues:!0,map:!1,silent:!1};function n(s){return typeof s=="string"&&!!s.trim()}function i(s,a){var o=s.split(";").filter(n),h=o.shift(),u=c(h),v=u.name,d=u.value;a=a?Object.assign({},r,a):r;try{d=a.decodeValues?decodeURIComponent(d):d}catch(m){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+d+"'. Set options.decodeValues to false to disable this feature.",m)}var p={name:v,value:d};return o.forEach(function(m){var w=m.split("="),g=w.shift().trimLeft().toLowerCase(),x=w.join("=");g==="expires"?p.expires=new Date(x):g==="max-age"?p.maxAge=parseInt(x,10):g==="secure"?p.secure=!0:g==="httponly"?p.httpOnly=!0:g==="samesite"?p.sameSite=x:p[g]=x}),p}function c(s){var a="",o="",h=s.split("=");return h.length>1?(a=h.shift(),o=h.join("=")):o=s,{name:a,value:o}}function l(s,a){if(a=a?Object.assign({},r,a):r,!s)return a.map?{}:[];if(s.headers)if(typeof s.headers.getSetCookie=="function")s=s.headers.getSetCookie();else if(s.headers["set-cookie"])s=s.headers["set-cookie"];else{var o=s.headers[Object.keys(s.headers).find(function(u){return u.toLowerCase()==="set-cookie"})];!o&&s.headers.cookie&&!a.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),s=o}if(Array.isArray(s)||(s=[s]),a=a?Object.assign({},r,a):r,a.map){var h={};return s.filter(n).reduce(function(u,v){var d=i(v,a);return u[d.name]=d,u},h)}else return s.filter(n).map(function(u){return i(u,a)})}function f(s){if(Array.isArray(s))return s;if(typeof s!="string")return[];var a=[],o=0,h,u,v,d,p;function m(){for(;o<s.length&&/\s/.test(s.charAt(o));)o+=1;return o<s.length}function w(){return u=s.charAt(o),u!=="="&&u!==";"&&u!==","}for(;o<s.length;){for(h=o,p=!1;m();)if(u=s.charAt(o),u===","){for(v=o,o+=1,m(),d=o;o<s.length&&w();)o+=1;o<s.length&&s.charAt(o)==="="?(p=!0,o=d,a.push(s.substring(h,v)),h=o):o=v+1}else o+=1;(!p||o>=s.length)&&a.push(s.substring(h,s.length))}return a}t.exports=l,t.exports.parse=l,t.exports.parseString=i,t.exports.splitCookiesString=f}}),E=Q(Z()),y="MSW_COOKIE_STORE";function H(){try{if(localStorage==null)return!1;const e=y+"_test";return localStorage.setItem(e,"test"),localStorage.getItem(e),localStorage.removeItem(e),!0}catch{return!1}}var R=H();function k(e,t){try{return e[t],!0}catch{return!1}}var ee=class{constructor(){this.store=new Map}add(e,t){if(k(e,"credentials")&&e.credentials==="omit")return;const r=new URL(e.url),n=t.headers.get("set-cookie");if(!n)return;const i=Date.now(),c=(0,E.parse)(n).map(({maxAge:f,...s})=>({...s,expires:f===void 0?s.expires:new Date(i+f*1e3),maxAge:f})),l=this.store.get(r.origin)||new Map;c.forEach(f=>{this.store.set(r.origin,l.set(f.name,f))})}get(e){this.deleteExpiredCookies();const t=new URL(e.url),r=this.store.get(t.origin)||new Map;if(!k(e,"credentials"))return r;switch(e.credentials){case"include":return typeof document>"u"||(0,E.parse)(document.cookie).forEach(i=>{r.set(i.name,i)}),r;case"same-origin":return r;default:return new Map}}getAll(){return this.deleteExpiredCookies(),this.store}deleteAll(e){const t=new URL(e.url);this.store.delete(t.origin)}clear(){this.store.clear()}hydrate(){if(!R)return;const e=localStorage.getItem(y);if(e)try{JSON.parse(e).forEach(([r,n])=>{this.store.set(r,new Map(n.map(([i,{expires:c,...l}])=>[i,c===void 0?l:{...l,expires:new Date(c)}])))})}catch(t){console.warn(`
[virtual-cookie] Failed to parse a stored cookie from the localStorage (key "${y}").

Stored value:
${localStorage.getItem(y)}

Thrown exception:
${t}

Invalid value has been removed from localStorage to prevent subsequent failed parsing attempts.`),localStorage.removeItem(y)}}persist(){if(!R)return;const e=Array.from(this.store.entries()).map(([t,r])=>[t,Array.from(r.entries())]);localStorage.setItem(y,JSON.stringify(e))}deleteExpiredCookies(){const e=Date.now();this.store.forEach((t,r)=>{t.forEach(({expires:n,name:i})=>{n!==void 0&&n.getTime()<=e&&t.delete(i)}),t.size===0&&this.store.delete(r)})}},ne=new ee;export{W as E,re as I,L as R,te as d,I as i,ne as s,se as t};
