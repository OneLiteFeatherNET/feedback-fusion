import{_ as s,c as t,o as a,af as e}from"./chunks/framework.BHm4q6mF.js";const c=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"docs/broker.md","filePath":"docs/broker.md"}'),n={name:"docs/broker.md"};function r(l,i,h,o,p,d){return a(),t("div",null,[...i[0]||(i[0]=[e(`<h2 id="broker-configuration" tabindex="-1">Broker Configuration <a class="header-anchor" href="#broker-configuration" aria-label="Permalink to &quot;Broker Configuration&quot;">​</a></h2><h3 id="background" tabindex="-1">Background <a class="header-anchor" href="#background" aria-label="Permalink to &quot;Background&quot;">​</a></h3><p>Feedback-Fusion employs an event-driven architecture where the main server component emits events that need to be processed asynchronously. The indexer service handles the actual processing of these events. Communication between these components flows through a broker system that ensures reliable message delivery and decouples event production from consumption.</p><p>The broker implementation offers two distinct approaches:</p><ul><li><p><strong>gRPC</strong>: Designed for smaller deployments where simplicity matters more than scale. The server sends asynchronous gRPC requests to the indexer, which processes events and returns responses after completion. This approach works well for single-instance setups but doesn&#39;t scale horizontally since each server instance needs to communicate with specific indexer instances.</p></li><li><p><strong>Fluvio</strong>: Built for high-performance scenarios requiring horizontal scalability. Events are published to a distributed streaming platform where multiple indexer instances can consume and process them concurrently. This enables dynamic scaling based on workload and provides better fault tolerance. Fluvio is essentially a faster, more modern alternative to Apache Kafka. See <a href="https://fluvio.io" target="_blank" rel="noreferrer">fluvio.io</a> for more details.</p></li></ul><p>Choose gRPC for development environments or small production setups where operational simplicity is preferred. Select Fluvio when you need to handle high event volumes across multiple server and indexer instances.</p><h3 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h3><h4 id="fluvio-driver" tabindex="-1">Fluvio Driver <a class="header-anchor" href="#fluvio-driver" aria-label="Permalink to &quot;Fluvio Driver&quot;">​</a></h4><p>Configure Fluvio as your broker driver for scalable, distributed event processing:</p><div class="language-hcl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hcl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">broker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fluvio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    topic </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;feedback-fusion&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fluvio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      endpoint </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;127.0.0.1:9003&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      use_spu_local_address </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      tls </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tls_policy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;disabled&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  batch_interval </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="grpc-driver" tabindex="-1">gRPC Driver <a class="header-anchor" href="#grpc-driver" aria-label="Permalink to &quot;gRPC Driver&quot;">​</a></h4><p>Configure gRPC as your broker driver for simple, direct communication:</p><div class="language-hcl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hcl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">broker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  grpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    endpoint </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://grpc.example.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tls </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      key                      </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/path/to/key.pem&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      certificate              </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/path/to/certificate.pem&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      certificate_authority    </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/path/to/ca.pem&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  max_batch_size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  batch_interval </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="configuration-reference" tabindex="-1">Configuration Reference <a class="header-anchor" href="#configuration-reference" aria-label="Permalink to &quot;Configuration Reference&quot;">​</a></h3><h4 id="top-level-parameters" tabindex="-1">Top-Level Parameters <a class="header-anchor" href="#top-level-parameters" aria-label="Permalink to &quot;Top-Level Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th><th>Default</th><th>Data Type</th></tr></thead><tbody><tr><td>fluvio</td><td>Fluvio broker driver configuration</td><td>N/A</td><td>Object</td></tr><tr><td>grpc</td><td>gRPC broker driver configuration</td><td>N/A</td><td>Object</td></tr><tr><td>max_batch_size</td><td>Maximum number of messages to process in a single batch</td><td>10</td><td>Integer</td></tr><tr><td>batch_interval</td><td>Time interval in milliseconds to wait before processing a batch</td><td>1000</td><td>Integer</td></tr></tbody></table><h4 id="fluvio-configuration" tabindex="-1">Fluvio Configuration <a class="header-anchor" href="#fluvio-configuration" aria-label="Permalink to &quot;Fluvio Configuration&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th><th>Default</th><th>Data Type</th></tr></thead><tbody><tr><td>fluvio</td><td>Fluvio cluster configuration object. See <a href="https://docs.rs/fluvio/latest/fluvio/config/struct.FluvioClusterConfig.html" target="_blank" rel="noreferrer">FluvioClusterConfig</a> for available options</td><td>N/A</td><td>Object</td></tr><tr><td>topic</td><td>Topic name for event streams</td><td>&quot;feedback-fusion&quot;</td><td>String</td></tr></tbody></table><h4 id="grpc-configuration" tabindex="-1">gRPC Configuration <a class="header-anchor" href="#grpc-configuration" aria-label="Permalink to &quot;gRPC Configuration&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th><th>Default</th><th>Data Type</th></tr></thead><tbody><tr><td>endpoint</td><td>gRPC server endpoint URL</td><td>N/A</td><td>String</td></tr><tr><td>tls</td><td>TLS configuration for secure communication</td><td>N/A</td><td>Object</td></tr></tbody></table><h4 id="tls-configuration" tabindex="-1">TLS Configuration <a class="header-anchor" href="#tls-configuration" aria-label="Permalink to &quot;TLS Configuration&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th><th>Default</th><th>Data Type</th></tr></thead><tbody><tr><td>key</td><td>Path to TLS private key file</td><td>N/A</td><td>String</td></tr><tr><td>certificate</td><td>Path to TLS certificate file</td><td>N/A</td><td>String</td></tr><tr><td>certificate_authority</td><td>Path to CA certificate file</td><td>N/A</td><td>String</td></tr></tbody></table><p><strong>Important</strong>: You must configure exactly one broker driver. Choose either <code>fluvio</code> or <code>grpc</code> - configuring both will result in an error.</p>`,23)])])}const u=s(n,[["render",r]]);export{c as __pageData,u as default};
